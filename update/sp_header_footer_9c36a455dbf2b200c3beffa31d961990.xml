<?xml version="1.0" encoding="UTF-8"?>
<record_update table="sp_header_footer">
    <sp_header_footer action="INSERT_OR_UPDATE">
        <client_script><![CDATA[function guideHeaderCtrl($scope, $timeout, spUtil, $location, glideUserSession) {
    /* widget controller */
    var c = this;
    $scope.userID = $scope.user.sys_id;
    $rootScope.user = $scope.user.sys_id;
    $rootScope.title = "";
    $rootScope.page = "home";
    $rootScope.showSignIn = false;
    $rootScope.pendingCall = {};
    $rootScope.showDropOptions = false;
    c.showAlert = false;


    //Inject a dummy widget which has shared angular components for the app
    spUtil.get('guide-components').then(function(response) {
        c.embedded_widget = response;
    });
    spUtil.get('guide-sign-in').then(function(response) {
        c.embedded_widget_signin = response;
    });

    c.addEvent = function() {
        c.server.get({ action: 'getSession' }).then(function(response) {
            $scope.user.logged_in = response.data.is_logged_in;
            if (!$scope.user.logged_in) {
                $rootScope.showSignIn = true;
                $rootScope.pendingCall = {
                    name: 'addEvent',
                    args: ["?id=city_guide_add_event_material"]
                }
            } else {
                $location.url("?id=city_guide_add_event_material");
            }
        })
        $rootScope.showDropOptions = false;
    }

    c.loginClicked = function() {
        $rootScope.showSignIn = true;
        $rootScope.showDropOptions = false;
    }
    c.listMyEvents = function() {
        $location.url('?id=city_guide_events_list');
        $rootScope.showDropOptions = !$rootScope.showDropOptions;
    }

    $rootScope.$on('addEventFromFooter', function(event, data) {
        c.addEvent();
    });

    $rootScope.$on('popAlert', function(event, data) {
        $timeout(function() {
            c.alertMessage = data;
            c.showAlert = true;
        });

        $timeout(function() {
            c.showAlert = false;
        }, 5000);

    });

    $rootScope.$on('addEvent', function(event, data) {
        $location.url(data[0]);
    });

    c.gotoPreviousPage = function() {
        $rootScope.pageVisits.pop();
        $rootScope.pageID = $rootScope.pageVisits[$rootScope.pageVisits.length - 1];
        $location.url("?id=" + $rootScope.pageID);
    }


    $rootScope.$on('refreshUser', function(event, data) {
        c.server.get({ action: 'getSession' }).then(function(response) {
            $scope.user.logged_in = response.data.is_logged_in;
            $rootScope.showDropOptions = false;
        })
    });
}]]></client_script>
        <controller_as>c</controller_as>
        <css>.header-div {&#13;
    position: relative;&#13;
    .alert-events {&#13;
        border-radius: 0px;&#13;
        background: #6bbdc6;&#13;
        position: fixed;&#13;
        width: 45%;&#13;
        top: -100px;&#13;
        height: 45px;&#13;
        left: 0;&#13;
        right: 0;&#13;
        margin-left: auto;&#13;
        margin-right: auto;&#13;
        display: flex;&#13;
        align-items: center;&#13;
        justify-content: center;&#13;
        // box-shadow: -1px 2px 3px #333;&#13;
        overflow: hidden;&#13;
        transition: all 0.5s;&#13;
        z-index: 1;&#13;
        &amp;.alert-pop {&#13;
            position: fixed;&#13;
            width: 45%;&#13;
            top: 125px;&#13;
            height: 45px;&#13;
            overflow: auto;&#13;
        }&#13;
        p {&#13;
            margin-bottom: 0px;&#13;
            color: #f1e2c9;&#13;
            font-size: 16px;&#13;
            text-transform: uppercase;&#13;
        }&#13;
    }&#13;
}&#13;
&#13;
.navbar {&#13;
    background-color: $navbar-inverse-bg;&#13;
    border-radius: 0;&#13;
    color: white;&#13;
    font-family: $font-family;&#13;
    margin-bottom: 0px;&#13;
    border: 0px !important;&#13;
    a {&#13;
        color: white;&#13;
    }&#13;
    .navbar-toggle {&#13;
        margin-top: 0px !important;&#13;
        margin-bottom: 1px !important;&#13;
        img {&#13;
            width: 24px;&#13;
        }&#13;
    }&#13;
    .navbar-header {&#13;
        border-bottom: 2px solid rgba(88, 87, 88, 0.4);&#13;
    }&#13;
    .navbar-collapse {&#13;
        position: absolute;&#13;
        top: 60px;&#13;
        left: 0px;&#13;
        height: 100vh;&#13;
        width: 100%;&#13;
        background-color: rgba(30, 30, 30, 0.9);&#13;
        z-index: 1020;&#13;
        margin: 0px;&#13;
        .navbar-content {&#13;
            margin-left: -15px;&#13;
            margin-right: -15px;&#13;
            opacity: 1;&#13;
            padding: 10px;&#13;
            background: #f6eddc;&#13;
        }&#13;
        .nav&gt;li a {&#13;
            color: $text-color-grey;&#13;
            text-align: right;&#13;
            text-transform: uppercase;&#13;
            font-size: 14px;&#13;
        }&#13;
    }&#13;
    .nav&gt;li&gt;a:focus {&#13;
        text-decoration: none;&#13;
        background-color: #f3f3dc !important;&#13;
    }&#13;
    .nav&gt;li&gt;a:hover,&#13;
    .nav&gt;li&gt;a:focus {&#13;
        text-decoration: none;&#13;
        background-color: #f3f3dc !important;&#13;
    }&#13;
    .back-div {&#13;
        line-height: 1;&#13;
    }&#13;
    .search-icon {&#13;
        width: 24px;&#13;
        height: 24px;&#13;
        fill: #fff;&#13;
        stroke: #fff;&#13;
    }&#13;
    .search-anchor {&#13;
        margin-top: 5px;&#13;
    }&#13;
    .flex-it {&#13;
        display: flex;&#13;
        justify-content: center;&#13;
        align-items: center;&#13;
    }&#13;
    .back-icon {&#13;
        width: 24px;&#13;
        height: 24px;&#13;
        fill: #fff;&#13;
        stroke: #fff;&#13;
        -ms-transform: rotate(90deg);&#13;
        /* IE 9 */&#13;
        -webkit-transform: rotate(90deg);&#13;
        /* Chrome, Safari, Opera */&#13;
        transform: rotate(90deg);&#13;
    }&#13;
    .navbar-toggle {&#13;
        //border-color: $navbar-toggle-color;&#13;
        .icon-bar {&#13;
            background-color: #fff;&#13;
        }&#13;
    }&#13;
    .sub-avatar {&#13;
        background-color: #fff;&#13;
    }&#13;
    .title-arrow {&#13;
        display: flex;&#13;
        align-items: center;&#13;
        padding-left: 10px;&#13;
        .title {&#13;
            font-size: 24px;&#13;
            text-transform: uppercase;&#13;
        }&#13;
    }&#13;
}&#13;
&#13;
.vertical-align {&#13;
    @media only screen and (max-width: 768px) {&#13;
        display: flex !important;&#13;
        justify-content: space-between;&#13;
        align-items: center;&#13;
    }&#13;
    display: block;&#13;
}&#13;
&#13;
.signin-div {&#13;
    position: absolute;&#13;
    top: 0;&#13;
    width: 100%;&#13;
    z-index: 1440;&#13;
    height: 100vh;&#13;
    background-color: rgba(30, 30, 30, 0.9);&#13;
}&#13;
&#13;
.navbar-brand {&#13;
    font-weight: 600;&#13;
}&#13;
&#13;
.user-block {&#13;
    padding: 7px 0;&#13;
    margin: 0;&#13;
    a {&#13;
        text-decoration: underline;&#13;
    }&#13;
    li {&#13;
        list-style: none;&#13;
    }&#13;
    .user-info {&#13;
        float: right;&#13;
        margin-left: 10px;&#13;
        height: 45px;&#13;
        .username {&#13;
            position: relative;&#13;
            top: 50%;&#13;
            transform: translateY(-50%);&#13;
        }&#13;
    }&#13;
    .avatar-medium {&#13;
        height: 45px;&#13;
        width: 45px;&#13;
    }&#13;
    .dropdown-menu a {&#13;
        text-decoration: none;&#13;
        color: black;&#13;
    }&#13;
}&#13;
&#13;
@media (max-width: 767px) {&#13;
    .user-info {&#13;
        display: none;&#13;
    }&#13;
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>guide-header</id>
        <internal>false</internal>
        <link/>
        <name>City Guide Header</name>
        <option_schema/>
        <public>true</public>
        <roles/>
        <script><![CDATA[(function() {
    /* populate the 'data' object */
    /* e.g., data.table = $sp.getValue('table'); */
    if (input) {
        if (input.action == 'getSession') {
            data.is_logged_in = gs.getSession().isLoggedIn();
        }
    }
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_header_footer</sys_class_name>
        <sys_created_by>sush.chandrashekar</sys_created_by>
        <sys_created_on>2017-05-16 22:54:45</sys_created_on>
        <sys_customer_update>true</sys_customer_update>
        <sys_id>9c36a455dbf2b200c3beffa31d961990</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_name>City Guide Header</sys_name>
        <sys_package display_value="Guide" source="x_snc_guide">e95995f8db767200c3beffa31d9619fc</sys_package>
        <sys_policy/>
        <sys_replace_on_upgrade>false</sys_replace_on_upgrade>
        <sys_scope display_value="Guide">e95995f8db767200c3beffa31d9619fc</sys_scope>
        <sys_update_name>sp_header_footer_9c36a455dbf2b200c3beffa31d961990</sys_update_name>
        <sys_updated_by>sush.chandrashekar</sys_updated_by>
        <sys_updated_on>2017-06-03 03:47:02</sys_updated_on>
        <template><![CDATA[<div ng-show="$root.title != 'home'" class="header-div">
    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol viewBox="0 0 48 48" id="icon-down">
        <title>Arrow_Down_v1a</title>
        <style type="text/css">
            .st0 {
                fill: none;
            }

            .st1 {
                fill-rule: evenodd;
                clip-rule: evenodd;
            }
        </style>
        <rect x="-630.7" y="-782.6" class="st0" width="2511.9" height="1666.4" />
        <path class="st1" d="M24,37.9c-0.3,0-0.5-0.1-0.7-0.3L1.4,15.7c-0.4-0.4-0.4-1,0-1.4c0.4-0.4,1-0.4,1.4,0L24,35.5l21.2-21.2
    c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4L24.7,37.6C24.5,37.8,24.3,37.9,24,37.9" />
    </symbol>


    <symbol id="search" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
        <g id="Outline_Icons_1_">
            <g id="Outline_Icons">
                <g>
                    <circle  stroke-linejoin="round" stroke-miterlimit="10" cx="8.5" cy="8.5" r="8"/>

                        <line stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="14.156" y1="14.156" x2="23.5" y2="23.5"/>
                </g>
            </g>
            <g id="New_icons_1_">
            </g>
        </g>
        <g id="Frames-24px">
            <rect />
        </g>
    </symbol>


    <symbol id="search-two" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path fill="none"/>
</symbol>

</svg>


    <div class="header">
        <nav class="navbar">
            <div class="container">

                <div class="navbar-header remove-padding row vertical-align col-md-12 col-sm-12">
                    <div class="col-xs-2 col-md-2  remove-padding visible-xs" ng-class="{'add-backpadding-left':ItsHome}">
                        <div class="title-arrow">
                            <!--<a ng-show="$root.pageID" class="pull-left back-div" ng-href="/guide?id={{$root.pageID}}">
                                <svg class="back-icon">
                                <use xlink:href='#icon-down'></use>
                            </svg>
                            </a>-->
                            <a ng-show="$root.pageVisits.length > 1" class="pull-left back-div" ng-click="c.gotoPreviousPage()">
                                <svg class="back-icon">
                                <use xlink:href='#icon-down'></use>
                            </svg>
                            </a>
                        </div>
                    </div>
                    <div class="hidden-xs navbar-brand">{{$root.title}}</div>
                    <div class="visible-xs col-xs-12 text-center">
                        <a class="col-xs-12 col-md-2 navbar-brand proj-title" ng-cloak="">
                            <span class="title">{{$root.title}}</span>
                        </a>
                    </div>
                    <div class=" col-xs-2 visible-xs remove-padding text-right remove-padding">
                        <div class="flex-it">
                            <a href="/guide?id=city_guide_search" class="search-anchor">

                                <svg class="search-icon">
                                <use xlink:href='#search-two'></use>
                            </svg>
                            </a>
                            <button type="button" class="navbar-toggle" ng-click="$root.showDropOptions = !$root.showDropOptions">

                           <img src="cog.png"/>
                    </button>
                        </div>
                    </div>
                </div>


                <div class=" navbar-collapse navbar-right" ng-show="$root.showDropOptions">
                    <div class="navbar-content">

                        <ul class="nav navbar-nav">
                            <!-- chat, avatar, and logout -->
                            <!--<li ng-if="::data.connect_support_queue_id"><a href ng-click="openPopUp()">${Live Chat}</a></li>
                            <li class="dropdown hidden-xs">
                                <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                                    <span class="navbar-avatar"><sn-avatar class="avatar-small-medium" primary="userID" /></span>
                                    <span class="visible-lg-inline">{{::user.name}}</span>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a ng-href="?id=user_profile&sys_id={{::user.sys_id}}">${Profile}</a></li>
                                    <li><a href="{{::portal.logoutUrl}}">${Logout}</a></li>
                                </ul>
                            </li>-->
                            <!--<li class="visible-xs-block" ng-if="::user.logged_in">
                            <a ng-href="?id=user_profile&sys_id={{::user.sys_id}}"></span>{{::user.name}}</a>
                        </li>-->
                            <li class="visible-xs-block" ng-if="!user.logged_in">
                                <a href="" ng-click="c.loginClicked()">Login</span>
                            </a>
                            </li>
                            <li class="visible-xs-block" ng-if="user.logged_in">
                                <a href="" ng-click="c.listMyEvents()"></span>My Events</a>
                            </li>
                            <li class="visible-xs-block">
                                <a ng-click="c.addEvent()"></span>Add an event</a>
                            </li>
                            <li class="visible-xs-block">
                                <a ng-href="">${Profile}</a>
                            </li>


                            <li ng-if="user.logged_in" class="visible-xs-block"><a href="/logout.do?sysparm_goto_url=/guide?id=city_guide_featured_events">${Logout}</a></li>
                        </ul>
                    </div>
                </div>



            </div>
        </nav>


    </div>
    <sp-widget widget="c.embedded_widget"></sp-widget>
    <div class="signin-div" ng-show="$root.showSignIn">
        <sp-widget widget="c.embedded_widget_signin"></sp-widget>
    </div>
    <div class="alert-events" ng-class="{'alert-pop':c.showAlert}">
        <p>{{c.alertMessage}}</p>
    </div>
</div>]]></template>
    </sp_header_footer>
</record_update>
